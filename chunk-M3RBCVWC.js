import{a as ee}from"./chunk-QJJCK6UP.js";import{a as re,c as ne,e as ae}from"./chunk-CDTKWBSS.js";import{a as se}from"./chunk-EEFS7JYH.js";import{a as oe}from"./chunk-EWLH7HIC.js";import{c as P}from"./chunk-TZDOR4PY.js";import{b as Y,c as Z}from"./chunk-C7BXDP6U.js";import{b as te,c as ie}from"./chunk-MPWMWIA5.js";import{b as J,c as K,i as Q,j as X}from"./chunk-KTXETM5X.js";import"./chunk-D3K4DV37.js";import{b as D,c as O,g as j,h as U,j as q,l as B,m as W,s as G,t as H,u as $,w as z}from"./chunk-UAC25CCP.js";import"./chunk-MYBYNWC4.js";import"./chunk-3HX4ON6O.js";import{k as I}from"./chunk-KGMFYYNB.js";import{$a as m,Bc as V,Jb as p,Lb as d,Pc as A,Qb as T,Rb as n,Sb as r,_b as k,aa as _,ba as x,dc as F,fa as E,ga as L,ib as M,la as f,ma as g,pb as R,pc as h,rb as N,t as u,tc as s,xc as C,yc as w,zc as S}from"./chunk-P7EQBKWJ.js";var b=class{constructor(t,a){this.email=t;this.password=a}};var v=class e{forbiddenName=A("",{alias:"appForbiddenName"});validate(t){return this.forbiddenName?se(new RegExp(this.forbiddenName(),"i"))(t):null}static \u0275fac=function(a){return new(a||e)};static \u0275dir=N({type:e,selectors:[["","appForbiddenName",""]],inputs:{forbiddenName:[1,"appForbiddenName","forbiddenName"]},features:[V([{provide:O,useExisting:_(()=>e),multi:!0}])]})};var le=e=>({token:e.data?.token,refreshToken:e.data?.refreshToken}),pe=e=>e.data.message,de=e=>({token:e.data?.token});var y=class e{constructor(t){this.http=t}apiUrl=oe.apiUrl;login(t){return this.http.post(`${this.apiUrl}/api/auth/login`,t).pipe(u(le))}signup(t){return this.http.post(`${this.apiUrl}/api/auth/signup`,t).pipe(u(pe))}logout(){return this.http.post(`${this.apiUrl}/api/auth/logout`,{})}refreshToken(){return this.http.get(`${this.apiUrl}/api/auth/refresh-token`,{headers:{"Content-Type":"application/json","x-refresh-token":`Bearer ${localStorage.getItem("refreshToken")}`}}).pipe(u(de))}static \u0275fac=function(a){return new(a||e)(E(I))};static \u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"})};function fe(e,t){e&1&&(n(0,"mat-error"),s(1," Email is required. "),r())}function ge(e,t){e&1&&(n(0,"mat-error"),s(1," Email is invalid. "),r())}function he(e,t){e&1&&(n(0,"mat-error"),s(1," Do not include 'test' in email. "),r())}function be(e,t){e&1&&(n(0,"mat-error"),s(1," Password is required. "),r())}function ve(e,t){e&1&&(n(0,"mat-error"),s(1," Password must be at least 8 characters long. "),r())}var ce=class e{constructor(t,a){this.auth=t;this.authApiService=a}router=L(P);login=new b("jonnhdoe@gmail.com","123456789");handleSubmit(){let t={token:crypto.randomUUID()};this.auth.setToken(t),this.router.navigate(["admin"])}static \u0275fac=function(a){return new(a||e)(M(ee),M(y))};static \u0275cmp=R({type:e,selectors:[["app-login"]],decls:25,vars:8,consts:[["loginForm","ngForm"],["email","ngModel"],["password","ngModel"],[1,"mx-6","mt-12"],[1,"text-center","text-2xl","font-semibold","mb-6"],[1,"",3,"ngSubmit"],["appearance","outlined",1,"mx-auto","max-w-md"],[1,"flex","flex-col","p-6","space-y-3"],["appearance","outline"],["matInput","","name","email","type","email","placeholder","Email","required","","email","","appForbiddenName","test",3,"ngModelChange","ngModel"],["matInput","","name","password","type","password","placeholder","Password","required","","minlength","8",3,"ngModelChange","ngModel"],["matButton","outlined","type","submit",3,"disabled"]],template:function(a,l){if(a&1){let c=k();n(0,"div",3)(1,"h1",4),s(2,"Login"),r(),n(3,"form",5,0),F("ngSubmit",function(){return f(c),g(l.handleSubmit())}),n(5,"mat-card",6)(6,"mat-card-content")(7,"div",7)(8,"mat-form-field",8)(9,"mat-label"),s(10,"Email"),r(),n(11,"input",9,1),S("ngModelChange",function(i){return f(c),w(l.login.email,i)||(l.login.email=i),g(i)}),r(),p(13,fe,2,0,"mat-error"),p(14,ge,2,0,"mat-error"),p(15,he,2,0,"mat-error"),r(),n(16,"mat-form-field",8)(17,"mat-label"),s(18,"Password"),r(),n(19,"input",10,2),S("ngModelChange",function(i){return f(c),w(l.login.password,i)||(l.login.password=i),g(i)}),r(),p(21,be,2,0,"mat-error"),p(22,ve,2,0,"mat-error"),r(),n(23,"button",11),s(24," LOGIN "),r()()()()()()}if(a&2){let c=h(4),o=h(12),i=h(20);m(11),C("ngModel",l.login.email),m(2),d(o.invalid&&(o.dirty||o.touched)&&o.hasError("required")?13:-1),m(),d(o.invalid&&(o.dirty||o.touched)&&o.hasError("email")?14:-1),m(),d(o.invalid&&(o.dirty||o.touched)&&o.hasError("forbiddenName")?15:-1),m(4),C("ngModel",l.login.password),m(2),d(i.invalid&&(i.dirty||i.touched)&&i.hasError("required")?21:-1),m(),d(i.invalid&&(i.dirty||i.touched)&&i.hasError("minlength")?22:-1),m(),T("disabled",!c.form.valid)}},dependencies:[z,W,D,j,U,G,$,H,B,q,v,Z,Y,Q,J,K,X,ie,te,ae,re,ne],styles:[".example-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] + mat-form-field[_ngcontent-%COMP%]{margin-left:8px}"]})};export{ce as Login};
