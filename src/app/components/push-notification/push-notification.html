<mat-card appearance="outlined">
  <mat-card-content>
    <mat-card-title>Notification</mat-card-title>
    <!-- <div *ngIf="notification$ | async as notification" class="alert alert-info mt-3"> -->
    @if(notification(); as notify) {
      <strong>{{ notify.title }}</strong>
      <p>{{ notify.body }}</p>
      <small>{{ notify.timestamp | date:'short' }}</small>
    }
    <!-- </div> -->

    <div class="mt-3 text-sm">
      <p><strong>Permission:</strong> {{ permission$ | async }}</p>
      <p><strong>Notifications Enabled:</strong> {{ isEnabled }}</p>
      <!-- <p *ngIf="token$ | async as token"><strong>Token:</strong> {{ token?.substring(0, 50) }}...</p> -->
      @if(token(); as token) {
        <p><strong>Token:</strong> {{ token?.substring(0, 50) }}...</p>
      }
    </div>
    <mat-card-actions>
      @if(!isEnabled) {
        <button
          mat-raised-button
          (click)="enableNotifications()"
        >
          Enable Notifications
        </button>
      } @else {
        <button
          mat-raised-button
          (click)="disableNotifications()"
        >
          Disable Notifications
        </button>
      }
    </mat-card-actions>
  </mat-card-content>
</mat-card>
