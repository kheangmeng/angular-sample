import{a as ee}from"./chunk-6WRFWURZ.js";import{b as P}from"./chunk-NWBSVYAQ.js";import{b as Y,c as Z}from"./chunk-4HJFLS6N.js";import{b as te,c as ie}from"./chunk-43WO2N5A.js";import{E as Q,F as X,b as D,c as O,g as j,h as U,j as q,l as B,m as W,q as G,r as H,s as $,u as z,x as J,y as K}from"./chunk-PBVPOCTB.js";import"./chunk-SNK4NGSF.js";import"./chunk-6UQFTU2W.js";import{a as re,c as oe,f as ne}from"./chunk-JQSFRR6V.js";import{a as ae}from"./chunk-EWLH7HIC.js";import{b as I}from"./chunk-LHSWGZGY.js";import"./chunk-XMJXFRRB.js";import{Eb as d,Gb as p,Lb as N,Mb as n,Mc as A,Nb as o,Vb as F,Xa as l,Z as _,_ as x,ac as T,ca as E,da as R,eb as C,ia as g,ja as f,lb as L,mc as h,nb as V,qc as s,t as c,uc as M,vc as w,wc as S,yc as k}from"./chunk-LVK5SO2U.js";var b=class{constructor(t,a){this.email=t;this.password=a}};function se(e){return t=>e.test(t.value)?{forbiddenName:{value:t.value}}:null}var v=class e{forbiddenName=A("",{alias:"appForbiddenName"});validate(t){return this.forbiddenName?se(new RegExp(this.forbiddenName(),"i"))(t):null}static \u0275fac=function(a){return new(a||e)};static \u0275dir=V({type:e,selectors:[["","appForbiddenName",""]],inputs:{forbiddenName:[1,"appForbiddenName","forbiddenName"]},features:[k([{provide:O,useExisting:_(()=>e),multi:!0}])]})};var me=e=>({token:e.data?.token,refreshToken:e.data?.refreshToken}),de=e=>e.data.message,pe=e=>({token:e.data?.token});var y=class e{constructor(t){this.http=t}apiUrl=ae.apiUrl;login(t){return this.http.post(`${this.apiUrl}/api/auth/login`,t).pipe(c(me))}signup(t){return this.http.post(`${this.apiUrl}/api/auth/signup`,t).pipe(c(de))}logout(){return this.http.post(`${this.apiUrl}/api/auth/logout`,{})}refreshToken(){return this.http.get(`${this.apiUrl}/api/auth/refresh-token`,{headers:{"Content-Type":"application/json","x-refresh-token":`Bearer ${localStorage.getItem("refreshToken")}`}}).pipe(c(pe))}static \u0275fac=function(a){return new(a||e)(E(I))};static \u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"})};function ge(e,t){e&1&&(n(0,"mat-error"),s(1," Email is required. "),o())}function fe(e,t){e&1&&(n(0,"mat-error"),s(1," Email is invalid. "),o())}function he(e,t){e&1&&(n(0,"mat-error"),s(1," Do not include 'test' in email. "),o())}function be(e,t){e&1&&(n(0,"mat-error"),s(1," Password is required. "),o())}function ve(e,t){e&1&&(n(0,"mat-error"),s(1," Password must be at least 8 characters long. "),o())}var ue=class e{constructor(t,a){this.auth=t;this.authApiService=a}router=R(P);login=new b("jonnhdoe@gmail.com","123456789");handleSubmit(){let t={token:crypto.randomUUID()};this.auth.setToken(t),this.router.navigate(["admin"])}static \u0275fac=function(a){return new(a||e)(C(ee),C(y))};static \u0275cmp=L({type:e,selectors:[["app-login"]],decls:25,vars:8,consts:[["loginForm","ngForm"],["email","ngModel"],["password","ngModel"],[1,"mx-6","mt-12"],[1,"text-center","text-2xl","font-semibold","mb-6"],[1,"",3,"ngSubmit"],["appearance","outlined",1,"mx-auto","max-w-md"],[1,"flex","flex-col","p-6","space-y-3"],["appearance","outline"],["matInput","","name","email","type","email","placeholder","Email","required","","email","","appForbiddenName","test",3,"ngModelChange","ngModel"],["matInput","","name","password","type","password","placeholder","Password","required","","minlength","8",3,"ngModelChange","ngModel"],["matButton","outlined","type","submit",3,"disabled"]],template:function(a,m){if(a&1){let u=F();n(0,"div",3)(1,"h1",4),s(2,"Login"),o(),n(3,"form",5,0),T("ngSubmit",function(){return g(u),f(m.handleSubmit())}),n(5,"mat-card",6)(6,"mat-card-content")(7,"div",7)(8,"mat-form-field",8)(9,"mat-label"),s(10,"Email"),o(),n(11,"input",9,1),S("ngModelChange",function(i){return g(u),w(m.login.email,i)||(m.login.email=i),f(i)}),o(),d(13,ge,2,0,"mat-error"),d(14,fe,2,0,"mat-error"),d(15,he,2,0,"mat-error"),o(),n(16,"mat-form-field",8)(17,"mat-label"),s(18,"Password"),o(),n(19,"input",10,2),S("ngModelChange",function(i){return g(u),w(m.login.password,i)||(m.login.password=i),f(i)}),o(),d(21,be,2,0,"mat-error"),d(22,ve,2,0,"mat-error"),o(),n(23,"button",11),s(24," LOGIN "),o()()()()()()}if(a&2){let u=h(4),r=h(12),i=h(20);l(11),M("ngModel",m.login.email),l(2),p(r.invalid&&(r.dirty||r.touched)&&r.hasError("required")?13:-1),l(),p(r.invalid&&(r.dirty||r.touched)&&r.hasError("email")?14:-1),l(),p(r.invalid&&(r.dirty||r.touched)&&r.hasError("forbiddenName")?15:-1),l(4),M("ngModel",m.login.password),l(2),p(i.invalid&&(i.dirty||i.touched)&&i.hasError("required")?21:-1),l(),p(i.invalid&&(i.dirty||i.touched)&&i.hasError("minlength")?22:-1),l(),N("disabled",!u.form.valid)}},dependencies:[z,W,D,j,U,G,$,H,B,q,v,Z,Y,Q,J,K,X,ie,te,ne,re,oe],styles:[".example-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] + mat-form-field[_ngcontent-%COMP%]{margin-left:8px}"]})};export{ue as Login};
